{% extends "layout.html" %}
{% from "_formhelpers.html" import render_field, render_multiselect %}
{% block body %}
<h2><a href="{{ url_for('comparisons') }}">Comparisons</a> / {{ id|truncate(6, True) }}</h2>

<h3>Assign</h3>

{% if sets %}
<p>This comparison is currently associated with the following sets:</p>

<ul class=entries>
{% for set in sets %}
<li>{{ set.info.action }} {{ set.info.system }}: {{ set.info.name }}
({{ set|length }} diff{% if set|length != 1 %}s{% endif %})
<ul>
  <li>
  <a href="{{ url_for('set_edit', escaped_id=set.quote()) }}">view set</a> |
  include diffs on this page
  </li>
</ul>
</li>
{% endfor %}
</ul>
{% endif %}

<form action="{{ url_for('set_add') }}" method=post class=add-entry>
  <input type=hidden name=id value={{ id }}>
  <dl>
    {{ render_multiselect(form.diffs, size=form.diffs.choices|length) }}
    {{ render_field(form.action) }}
    {{ render_field(form.system) }}
    {{ render_field(form.name) }}
    <dd><input type=submit value=Add>
  </dl>
</form>

{% endblock %}
